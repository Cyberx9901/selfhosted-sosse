{% extends "se/base.html" %}

{% block css %}
    .search-form {
        text-align: center;
        padding: 10px;
    }
    .links {
        display: block;
        text-align: right;
        font-size: 13px;
        text-decoration: none;
    }
    .res-title {
        margin-bottom: 0px;
    }
    .res-url {
        text-decoration: none;
        color: #080;
        font-size: 13px;
    }
    .res-rank {
        font-size: 10px;
        display: inline;
    }
    .pagination {
        padding: 20px 0px 20px 0px;
    }
{% endblock %}

{% block js %}
window.onload = function() {
    // Set browser language
    const form = document.getElementById('search_form');
    const langInput = document.getElementById('id_lang');
    langInput.value = getLang();
}
{% endblock %}

{% block body %}
    <form method="get" class="search-form" id="search_form">
        {% for field in form.hidden_fields %}
            {{ field }}
        {% endfor %}

        {% for field in form.visible_fields %}
            {# {{ field.label }} #}{{ field }}
        {% endfor %}
        <input type="submit" value="ðŸ”Ž">
    </form>
    <a href="/prefs/" class="links">Prefs</a>
    <a href="/admin/" class="links">Admin</a>
    {% if results %}
        <hr/>
        {{ results|length }} result{{ results|pluralize:"s" }}
        {% for r in paginated %}
            <a href="{{ r.url }}">
                <h3 class="res-title">{{ r.title }}</h3>
            </a>
            <a href="{{ r.url }}" class="res-url">
                {{ r.url }}
            </a>
            <div class="res-rank">/ {{ r.rank|floatformat:"1" }}</div>
            <div class="res-rank">{{ r.lang_iso_639_1 }}</div>
            <br/>
            {% for entry in r.headline %}{{ entry }}{% endfor %}
        {% endfor %}

        <div class="pagination">
            <span class="step-links">
                {% if paginated.has_previous %}
                    <a href="?q={{ q }}">&laquo; first</a>
                    <a href="?page={{ paginated.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ paginated.number }} of {{ paginated.paginator.num_pages }}.
                </span>

                {% if paginated.has_next %}
                    <a href="?q={{ q }}&page={{ paginated.next_page_number }}">next</a>
                    <a href="?q={{ q }}&page={{ paginated.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    {% endif %}
{% endblock %}
